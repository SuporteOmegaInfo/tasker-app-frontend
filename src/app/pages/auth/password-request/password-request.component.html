<div class="container-fluid">
  <div class="row all-page">
    <div class="col-md-5 text-center page-prefix">
      <div class="app-logo">
        <img src="./../../../../assets/images/logo.webp" alt="" />
      </div>
      <h2 class="mt-3">Recuperação de Senha</h2>
    </div>
    <div class="col-md-7 page-side-content">
      <div class="tower-effect">
        <div class="tower"></div>
        <div class="tower"></div>
        <div class="tower"></div>
      </div>

      <div class="request-password-form pl-5">
        <div class="stage1" *ngIf="stage == 0">
          <h2>Problemas para iniciar a sessão?</h2>
          <p class="mt-3" style="width: 400px; max-width: 100%;">Insira um endereço de e-mail para verificação e envio de um código de confirmação.</p>

          <form class="center-page-form" [formGroup]="form" (submit)="submit()">
            <div class="container-fluid px-0">
              <div class="row py-3">
                <div class="form-group col-12">
                  <form-input-group
                    [formGroup]="form"
                    icon="mail_outline"
                    elementId="email"
                    type="email"
                    masker=""
                    label="E-mail"
                    placeholder="seu@email.com"
                    formControlName="email"
                    [cssClass]="applyErrorCss('email')"
                    [showLabel]="true"
                    [control]="form.get('email')"
                    [isReadOnly]="submittingForm"
                  ></form-input-group>
                </div>
                <div class="form-group col-12 mt-3">
                  <button
                    [ngClass]="{ loading: submittingForm }"
                    type="submit"
                    class="p-2"
                    mat-raised-button
                    [disabled]="!form.valid"
                    color="primary"
                  >
                    Enviar código via e-mail
                  </button>
                  <a class="ml-3" routerLink="/auth/login">Voltar para o login</a>
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="stage2" *ngIf="stage == 1">

          <h2>Insira o token enviado para seu e-mail</h2>
          <p class="mt-3" style="width: 400px; max-width: 100%;">Insira o token recebido em seu e-mail para prosseguir com a solicitação de recuperação de senha.</p>

          <form class="center-page-form" [formGroup]="form" (submit)="submit()">
            <div class="container-fluid px-0">
              <div class="row py-3">
                <div class="form-group col-12">
                  <form-input-group
                    [formGroup]="form"
                    icon="token"
                    elementId="code"
                    type="text"
                    masker=""
                    label="Token"
                    formControlName="code"
                    [cssClass]="applyErrorCss('code')"
                    [showLabel]="true"
                    [control]="form.get('code')"
                    [isReadOnly]="submittingForm"
                  ></form-input-group>
                </div>
                <div class="form-group col-12 mt-3">
                  <button
                    [ngClass]="{ loading: submittingForm }"
                    type="submit"
                    class="p-2"
                    mat-raised-button
                    [disabled]="!form.valid"
                    color="primary"
                  >
                    Validar código
                  </button>
                  <a class="ml-3" routerLink="/auth/login">Voltar para o login</a>
                  <a class="ml-3" routerLink="/auth/login">reenviar código</a>
                </div>
              </div>
            </div>
          </form>

        </div>

        <div class="stage3" *ngIf="stage == 2">

          <h2>Informe uma nova senha</h2>
          <p class="mt-3" style="width: 400px; max-width: 100%;">Insira e confirme uma nova senha para ser substituida em sua conta.</p>

          <form class="center-page-form" [formGroup]="form" (submit)="submit()">
            <div class="container-fluid px-0">
              <div class="row py-3">
                <div class="form-group col-12">
                  <form-input-group
                    [formGroup]="form"
                    icon="lock_outline"
                    elementId="password"
                    type="password"
                    masker=""
                    label="Senha"
                    formControlName="password"
                    [cssClass]="applyErrorCss('password')"
                    [showLabel]="true"
                    [control]="form.get('password')"
                    [isReadOnly]="submittingForm"
                  ></form-input-group>
                </div>
                <div class="form-group col-12 mt-3">
                  <form-input-group
                    [formGroup]="form"
                    icon="lock_outline"
                    elementId="confirmation"
                    type="password"
                    masker=""
                    label="Confirmação de Senha"
                    formControlName="confirmation"
                    [cssClass]="applyErrorCss('confirmation')"
                    [showLabel]="true"
                    [control]="form.get('confirmation')"
                    [isReadOnly]="submittingForm"
                  ></form-input-group>
                </div>
                <div class="form-group col-12 mt-3">
                  <button
                    [ngClass]="{ loading: submittingForm }"
                    type="submit"
                    class="p-2"
                    mat-raised-button
                    [disabled]="!form.valid"
                    color="primary"
                  >
                    Trocar minha senha
                  </button>
                  <a class="ml-3" routerLink="/auth/login">Voltar para o login</a>
                </div>
              </div>
            </div>
          </form>

        </div>

        <div class="stage4" *ngIf="stage == 3">

          <h2>Sucesso!</h2>
          <p class="mt-3" style="width: 400px; max-width: 100%;">Sua senha foi substituída com sucesso, clique no link para acessar o login.</p>
          <a class="ml-3" routerLink="/auth/login">Ir para o login</a>

        </div>
      </div>
    </div>
  </div>
</div>
